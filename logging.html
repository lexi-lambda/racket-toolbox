<!DOCTYPE html>
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>3&nbsp;Logging</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Toolbox:<span class="mywbr"> &nbsp;</span> Miscellaneous Utilities</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="syntax.html" class="tocviewlink" data-pltdoc="x">Syntax</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="data.html" class="tocviewlink" data-pltdoc="x">Data Structures</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Logging</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="format.html" class="tocviewlink" data-pltdoc="x">Formatting</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="print.html" class="tocviewlink" data-pltdoc="x">Printing</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="gregor.html" class="tocviewlink" data-pltdoc="x">Gregor</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="db.html" class="tocviewlink" data-pltdoc="x">Database</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="draw.html" class="tocviewlink" data-pltdoc="x">Drawing</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="web.html" class="tocviewlink" data-pltdoc="x">Web</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>3&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Logging</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="#%28part._logging~3awriters%29" class="tocviewlink" data-pltdoc="x">Log writers</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="#%28part._toolbox-logger%29" class="tocviewlink" data-pltdoc="x">Toolbox logger</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><a href="#%28form._%28%28lib._toolbox%2Flogging..rkt%29._logger-out%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">logger-<wbr></wbr>out</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._toolbox%2Flogging..rkt%29._define-log-message-transformers%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>log-<wbr></wbr>message-<wbr></wbr>transformers</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._toolbox%2Flogging..rkt%29._define-root-logger%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>root-<wbr></wbr>logger</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._log-message-info%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">log-<wbr></wbr>message-<wbr></wbr>info</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.1<span class="stt">&nbsp;</span></span><a href="#%28part._logging~3awriters%29" class="tocsubseclink" data-pltdoc="x">Log writers</a></td></tr><tr><td><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._spawn-pretty-log-writer%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">spawn-<wbr></wbr>pretty-<wbr></wbr>log-<wbr></wbr>writer</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._log-writer~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">log-<wbr></wbr>writer?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._close-log-writer%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">close-<wbr></wbr>log-<wbr></wbr>writer</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._log-writer-closed~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">log-<wbr></wbr>writer-<wbr></wbr>closed?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._flush-log-writer%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">flush-<wbr></wbr>log-<wbr></wbr>writer</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.2<span class="stt">&nbsp;</span></span><a href="#%28part._toolbox-logger%29" class="tocsubseclink" data-pltdoc="x">Toolbox logger</a></td></tr><tr><td><a href="#%28def._%28%28lib._toolbox%2Flogger..rkt%29._toolbox-logger%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">toolbox-<wbr></wbr>logger</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">9.1.0.7</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="order.html" title="backward to &quot;2.5 Orders&quot;" data-pltdoc="x" rel="prev">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Toolbox: Miscellaneous Utilities&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="format.html" title="forward to &quot;4 Formatting&quot;" data-pltdoc="x" rel="next">next &rarr;</a></span>&nbsp;</div><section class="SsectionLevel2" id="section 3"><h2 class="heading">3<span class="stt">&nbsp;</span><a name="(part._logging)"></a><a name="(mod-path._toolbox/logging)"></a>Logging<span class="button-group"><a href="#(part._logging)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h2><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">toolbox/logging</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/toolbox-lib" title="Install this package using `raco pkg install toolbox-lib`"><span class="stt">toolbox-lib</span></a></span></td></tr></table></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>provide syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._toolbox/logging..rkt)._logger-out))"></a><span title="Provided from: toolbox/logging | Package: toolbox-lib"><span class="RktSym"><a href="#%28form._%28%28lib._toolbox%2Flogging..rkt%29._logger-out%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">logger-out</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">When used in <span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._provide%2529%2529" class="RktStxLink Sq" data-pltdoc="x">provide</a></span>, exports <span class="stt">log-<span class="RktVar">id</span>-fatal</span>, <span class="stt">log-<span class="RktVar">id</span>-error</span>, <span class="stt">log-<span class="RktVar">id</span>-warning</span>, <span class="stt">log-<span class="RktVar">id</span>-info</span>, and <span class="stt">log-<span class="RktVar">id</span>-debug</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._toolbox/logging..rkt)._define-log-message-transformers))"></a><span title="Provided from: toolbox/logging | Package: toolbox-lib"><span class="RktSym"><a href="#%28form._%28%28lib._toolbox%2Flogging..rkt%29._define-log-message-transformers%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-log-message-transformers</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">logger-expr</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">logger-expr</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=logging.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._logger%7E3f%2529%2529" class="RktValLink Sq" data-pltdoc="x">logger?</a></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Defines <span class="stt">log-<span class="RktVar">id</span>-fatal</span>, <span class="stt">log-<span class="RktVar">id</span>-error</span>, <span class="stt">log-<span class="RktVar">id</span>-warning</span>, <span class="stt">log-<span class="RktVar">id</span>-info</span>, and <span class="stt">log-<span class="RktVar">id</span>-debug</span> as forms like <span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=logging.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._log-fatal%2529%2529" class="RktStxLink Sq" data-pltdoc="x">log-fatal</a></span>, <span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=logging.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._log-error%2529%2529" class="RktStxLink Sq" data-pltdoc="x">log-error</a></span>, <span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=logging.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._log-warning%2529%2529" class="RktStxLink Sq" data-pltdoc="x">log-warning</a></span>, <span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=logging.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._log-info%2529%2529" class="RktStxLink Sq" data-pltdoc="x">log-info</a></span>, and <span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=logging.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._log-debug%2529%2529" class="RktStxLink Sq" data-pltdoc="x">log-debug</a></span>, with two differences:
</div><div class="SIntrapara"><ul><li><p>The defined forms log messages to <span class="RktVar">logger-expr</span> instead of the <a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=logging.html%23%2528tech._current._logger%2529" class="techoutside Sq" data-pltdoc="x"><span class="techinside">current logger</span></a>.</p></li><li><p>A <span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._log-message-info%29%29" class="RktValLink" data-pltdoc="x">log-message-info</a></span> structure is sent to the logger instead of <span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=contmarks.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-continuation-marks%2529%2529" class="RktValLink Sq" data-pltdoc="x">current-continuation-marks</a></span><span class="RktPn">)</span>.</p></li></ul></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._toolbox/logging..rkt)._define-root-logger))"></a><span title="Provided from: toolbox/logging | Package: toolbox-lib"><span class="RktSym"><a href="#%28form._%28%28lib._toolbox%2Flogging..rkt%29._define-root-logger%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-root-logger</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">option</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">option</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:topic</span><span class="hspace">&nbsp;</span><span class="RktVar">topic-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:parent</span><span class="hspace">&nbsp;</span><span class="RktVar">parent-expr</span></td></tr></table></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><blockquote class="SubFlow"><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">topic-expr</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">parent-expr</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=logging.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._logger%7E3f%2529%2529" class="RktValLink Sq" data-pltdoc="x">logger?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Defines <span class="stt"><span class="RktVar">id</span>-logger</span> as a new <a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=logging.html%23%2528tech._logger%2529" class="techoutside Sq" data-pltdoc="x"><span class="techinside">logger</span></a>. The logger&#8217;s default topic is the result of <span class="RktVar">topic-expr</span>, or <span class="RktVal">'</span><span class="RktVar">id</span> if no <span class="RktVar">topic-expr</span> is provided. The logger&#8217;s parent is the result of <span class="RktVar">parent-expr</span>, or <span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=logging.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-logger%2529%2529" class="RktValLink Sq" data-pltdoc="x">current-logger</a></span><span class="RktPn">)</span> if no <span class="RktVar">parent-expr</span> is provided.</div></p><p>The <span class="RktSym"><a href="#%28form._%28%28lib._toolbox%2Flogging..rkt%29._define-root-logger%29%29" class="RktStxLink" data-pltdoc="x">define-root-logger</a></span> form also defines <span class="stt">log-<span class="RktVar">id</span>-fatal</span>, <span class="stt">log-<span class="RktVar">id</span>-error</span>, <span class="stt">log-<span class="RktVar">id</span>-warning</span>, <span class="stt">log-<span class="RktVar">id</span>-info</span>, and <span class="stt">log-<span class="RktVar">id</span>-debug</span> in the same way as <span class="RktSym"><a href="#%28form._%28%28lib._toolbox%2Flogging..rkt%29._define-log-message-transformers%29%29" class="RktStxLink" data-pltdoc="x">define-log-message-transformers</a></span>, with <span class="stt"><span class="RktVar">id</span>-logger</span> as the target logger.</p><p>Finally, <span class="RktSym"><a href="#%28form._%28%28lib._toolbox%2Flogging..rkt%29._define-root-logger%29%29" class="RktStxLink" data-pltdoc="x">define-root-logger</a></span> defines <span class="stt">define-<span class="RktVar">id</span>-logger</span> as a form like <span class="RktSym"><a href="#%28form._%28%28lib._toolbox%2Flogging..rkt%29._define-root-logger%29%29" class="RktStxLink" data-pltdoc="x">define-root-logger</a></span> itself, except <span class="stt"><span class="RktVar">id</span>-logger</span> is always used as the parent logger (and the <span class="RktPn">#:parent</span> option is not allowed). This form can be used to conveniently define child loggers to form a logging hierarchy.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._toolbox%2Flogging..rkt%29._define-root-logger%29%29" class="RktStxLink" data-pltdoc="x">define-root-logger</a></span><span class="hspace">&nbsp;</span><span class="RktSym">toolbox</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">toolbox-receiver</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=logging.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._make-log-receiver%2529%2529" class="RktValLink Sq" data-pltdoc="x">make-log-receiver</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogger..rkt%29._toolbox-logger%29%29" class="RktValLink" data-pltdoc="x">toolbox-logger</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">debug</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">log-toolbox-info</span><span class="hspace">&nbsp;</span><span class="RktVal">"message on the root logger"</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=sync.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._sync%2529%2529" class="RktValLink Sq" data-pltdoc="x">sync</a></span><span class="hspace">&nbsp;</span><span class="RktSym">toolbox-receiver</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktRes">(vector</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">'info</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">"message on the root logger"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">(log-message-info 1771799013208.5686 #&lt;continuation-mark-set&gt;)</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">'toolbox)</span></p></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define-toolbox-logger</span><span class="hspace">&nbsp;</span><span class="RktSym">toolbox:example</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">log-toolbox:example-debug</span><span class="hspace">&nbsp;</span><span class="RktVal">"message on a child logger"</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=sync.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._sync%2529%2529" class="RktValLink Sq" data-pltdoc="x">sync</a></span><span class="hspace">&nbsp;</span><span class="RktSym">toolbox-receiver</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktRes">(vector</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">'debug</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">"message on a child logger"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">(log-message-info 1771799013240.692 #&lt;continuation-mark-set&gt;)</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">'toolbox:example)</span></p></td></tr></table></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><table cellspacing="0" cellpadding="0" class="RForeground"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529" class="RktStxLink Sq" data-pltdoc="x">struct</a></span></td><td><span class="hspace">&nbsp;</span></td><td><a name="(def._((lib._toolbox/logging..rkt)._log-message-info-continuation-marks))"></a><a name="(def._((lib._toolbox/logging..rkt)._log-message-info-milliseconds))"></a><a name="(def._((lib._toolbox/logging..rkt)._make-log-message-info))"></a><a name="(def._((lib._toolbox/logging..rkt)._log-message-info~3f))"></a><a name="(def._((lib._toolbox/logging..rkt)._struct~3alog-message-info))"></a><a name="(def._((lib._toolbox/logging..rkt)._log-message-info))"></a><span title="Provided from: toolbox/logging | Package: toolbox-lib"><span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._log-message-info%29%29" class="RktValDef RktValLink" data-pltdoc="x">log-message-info</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">milliseconds</span><span class="stt"> </span><span class="RktSym">continuation-marks</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:extra-constructor-name</span><span class="hspace">&nbsp;</span><span class="RktSym">make-log-message-info</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">milliseconds</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._rational%7E3f%2529%2529" class="RktValLink Sq" data-pltdoc="x">rational?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">continuation-marks</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=contmarks.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._continuation-mark-set%7E3f%2529%2529" class="RktValLink Sq" data-pltdoc="x">continuation-mark-set?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A structure type used by the forms defined by <span class="RktSym"><a href="#%28form._%28%28lib._toolbox%2Flogging..rkt%29._define-log-message-transformers%29%29" class="RktStxLink" data-pltdoc="x">define-log-message-transformers</a></span> to record when and from where a message was sent to a logger. The value of the <span class="RktSym">milliseconds</span> field should be <span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=time.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-inexact-milliseconds%2529%2529" class="RktValLink Sq" data-pltdoc="x">current-inexact-milliseconds</a></span><span class="RktPn">)</span> and the value of the <span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=contmarks.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._continuation-marks%2529%2529" class="RktValLink Sq" data-pltdoc="x">continuation-marks</a></span> field should be <span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=contmarks.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-continuation-marks%2529%2529" class="RktValLink Sq" data-pltdoc="x">current-continuation-marks</a></span><span class="RktPn">)</span>.</div></p><p>The <span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._log-message-info%29%29" class="RktValLink" data-pltdoc="x">log-message-info</a></span> structure type implements <span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=gregor&amp;rel=moment-provider.html%23%2528def._%2528%2528lib._gregor%252Fmain..rkt%2529._gen%7E3amoment-provider%2529%2529" class="RktValLink Sq" data-pltdoc="x">gen:moment-provider</a></span> using the value of the <span class="RktSym">milliseconds</span> field.</p><section class="SsectionLevel3" id="section 3.1"><h3 class="heading">3.1<span class="stt">&nbsp;</span><a name="(part._logging~3awriters)"></a>Log writers<span class="button-group"><a href="#(part._logging~3awriters)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._toolbox/logging..rkt)._spawn-pretty-log-writer))"></a><span title="Provided from: toolbox/logging | Package: toolbox-lib"><span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._spawn-pretty-log-writer%29%29" class="RktValDef RktValLink" data-pltdoc="x">spawn-pretty-log-writer</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">receiver</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span><span class="RktOpt">[</span></td><td valign="top"><span class="RktPn">#:out</span><span class="hspace">&nbsp;</span><span class="RktVar">out</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:process-name</span><span class="hspace">&nbsp;</span><span class="RktVar">process-name</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:millis?</span><span class="hspace">&nbsp;</span><span class="RktVar">millis?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:color?</span><span class="hspace">&nbsp;</span><span class="RktVar">color?</span><span class="RktOpt">]</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._log-writer~3f%29%29" class="RktValLink" data-pltdoc="x">log-writer?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">receiver</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._evt%252Fc%2529%2529" class="RktValLink Sq" data-pltdoc="x">evt/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fvector..rkt%2529._vector%252Fc%2529%2529" class="RktValLink Sq" data-pltdoc="x">vector/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=logging.html%23%2528def._%2528%2528lib._racket%252Flogging..rkt%2529._log-level%252Fc%2529%2529" class="RktValLink Sq" data-pltdoc="x">log-level/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">out</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._output-port%7E3f%2529%2529" class="RktValLink Sq" data-pltdoc="x">output-port?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-output-port%2529%2529" class="RktValLink Sq" data-pltdoc="x">current-output-port</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">process-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">millis?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">color?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._terminal-port%7E3f%2529%2529" class="RktValLink Sq" data-pltdoc="x">terminal-port?</a></span><span class="hspace">&nbsp;</span><span class="RktVar">out</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Starts a new <a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=eval-model.html%23%2528tech._thread%2529" class="techoutside Sq" data-pltdoc="x"><span class="techinside">thread</span></a> that repeatedly synchronizes on <span class="RktVar">receiver</span> (which is usually the result of a call to <span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=logging.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._make-log-receiver%2529%2529" class="RktValLink Sq" data-pltdoc="x">make-log-receiver</a></span>) and writes a formatted version of each <a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=sync.html%23%2528tech._synchronization._result%2529" class="techoutside Sq" data-pltdoc="x"><span class="techinside">synchronization result</span></a> to <span class="RktVar">out</span>. The result of <span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._spawn-pretty-log-writer%29%29" class="RktValLink" data-pltdoc="x">spawn-pretty-log-writer</a></span> is a <a name="(tech._log._writer)"></a><span style="font-style: italic">log writer</span> handle that can be used to flush or terminate the writer thread.</div></p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._toolbox%2Flogging..rkt%29._define-root-logger%29%29" class="RktStxLink" data-pltdoc="x">define-root-logger</a></span><span class="hspace">&nbsp;</span><span class="RktSym">toolbox</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">writer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._spawn-pretty-log-writer%29%29" class="RktValLink" data-pltdoc="x">spawn-pretty-log-writer</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=logging.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._make-log-receiver%2529%2529" class="RktValLink Sq" data-pltdoc="x">make-log-receiver</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogger..rkt%29._toolbox-logger%29%29" class="RktValLink" data-pltdoc="x">toolbox-logger</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">debug</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">log-toolbox-info</span><span class="hspace">&nbsp;</span><span class="RktVal">"an informational message"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktOut">[2026-02-22 22:23:33] [toolbox/INFO] an informational message</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">log-toolbox-fatal</span><span class="hspace">&nbsp;</span><span class="RktVal">"a fatal message!!"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktOut">[2026-02-22 22:23:33] [toolbox/FATAL] a fatal message!!</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._close-log-writer%29%29" class="RktValLink" data-pltdoc="x">close-log-writer</a></span><span class="hspace">&nbsp;</span><span class="RktSym">writer</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>Because log messages are written asynchronously, most programs should explicitly call <span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._close-log-writer%29%29" class="RktValLink" data-pltdoc="x">close-log-writer</a></span> to ensure all log messages are flushed before exiting. Otherwise, messages logged immediately prior to termination may be lost.</p><p>If <span class="RktVar">process-name</span> is not <span class="RktVal">#f</span>, it is written after the topic and log level using <span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._display%2529%2529" class="RktValLink Sq" data-pltdoc="x">display</a></span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._spawn-pretty-log-writer%29%29" class="RktValLink" data-pltdoc="x">spawn-pretty-log-writer</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=logging.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._make-log-receiver%2529%2529" class="RktValLink Sq" data-pltdoc="x">make-log-receiver</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogger..rkt%29._toolbox-logger%29%29" class="RktValLink" data-pltdoc="x">toolbox-logger</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">debug</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:process-name</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">worker</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">#&lt;log-writer:worker&gt;</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">log-toolbox-info</span><span class="hspace">&nbsp;</span><span class="RktVal">"message from a worker process"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktOut">[2026-02-22 22:23:33] [toolbox/INFO@worker] message from a worker process</span></p></td></tr></table></blockquote><p>If the third element of the result of <span class="RktVar">receiver</span> implements <span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=gregor&amp;rel=moment-provider.html%23%2528def._%2528%2528lib._gregor%252Fmain..rkt%2529._gen%7E3amoment-provider%2529%2529" class="RktValLink Sq" data-pltdoc="x">gen:moment-provider</a></span>, <span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=gregor&amp;rel=moment-provider.html%23%2528def._%2528%2528lib._gregor%252Fmain..rkt%2529._-%7E3emoment%2529%2529" class="RktValLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span>moment</a></span> is used to extract a timestamp for the message. Otherwise, the timestamp is based on the moment the message is received, rather than when the message was logged, which can be substantially less accurate. The logging forms defined by <span class="RktSym"><a href="#%28form._%28%28lib._toolbox%2Flogging..rkt%29._define-log-message-transformers%29%29" class="RktStxLink" data-pltdoc="x">define-log-message-transformers</a></span> send a <span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._log-message-info%29%29" class="RktValLink" data-pltdoc="x">log-message-info</a></span> structure with each message, which <span class="emph">do</span> implement <span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=gregor&amp;rel=moment-provider.html%23%2528def._%2528%2528lib._gregor%252Fmain..rkt%2529._gen%7E3amoment-provider%2529%2529" class="RktValLink Sq" data-pltdoc="x">gen:moment-provider</a></span> and supply a reliable timestamp.</p><p>If <span class="RktVar">millis?</span> is not <span class="RktVal">#f</span>, timestamps are written with millisecond precision. However, see the caveat about timestamp accuracy from the previous paragraph.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._spawn-pretty-log-writer%29%29" class="RktValLink" data-pltdoc="x">spawn-pretty-log-writer</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=logging.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._make-log-receiver%2529%2529" class="RktValLink Sq" data-pltdoc="x">make-log-receiver</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogger..rkt%29._toolbox-logger%29%29" class="RktValLink" data-pltdoc="x">toolbox-logger</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">debug</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:millis?</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">#&lt;log-writer&gt;</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">log-toolbox-info</span><span class="hspace">&nbsp;</span><span class="RktVal">"high-precision message"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktOut">[2026-02-22 22:23:33.573] [toolbox/INFO] high-precision message</span></p></td></tr></table></blockquote></div></p><p>If <span class="RktVar">color?</span> is not <span class="RktVal">#f</span>, <a href="https://en.wikipedia.org/wiki/ANSI_escape_code">ANSI escape codes</a> are included in the formatted output to colorize the output for log levels other than <span class="RktVal">'</span><span class="RktVal">info</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._toolbox/logging..rkt)._log-writer~3f))"></a><span title="Provided from: toolbox/logging | Package: toolbox-lib"><span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._log-writer~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">log-writer?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is a <a href="#%28tech._log._writer%29" class="techoutside" data-pltdoc="x"><span class="techinside">log writer</span></a> handle returned by <span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._spawn-pretty-log-writer%29%29" class="RktValLink" data-pltdoc="x">spawn-pretty-log-writer</a></span>, otherwise returns <span class="RktVal">#f</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._toolbox/logging..rkt)._close-log-writer))"></a><span title="Provided from: toolbox/logging | Package: toolbox-lib"><span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._close-log-writer%29%29" class="RktValDef RktValLink" data-pltdoc="x">close-log-writer</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">writer</span><span class="hspace">&nbsp;</span><span class="RktOpt">[</span><span class="RktPn">#:wait?</span><span class="hspace">&nbsp;</span><span class="RktVar">wait?</span><span class="RktOpt">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">writer</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._log-writer~3f%29%29" class="RktValLink" data-pltdoc="x">log-writer?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">wait?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#t</span></td></tr></table></blockquote></div><div class="SIntrapara">Closes the given <a href="#%28tech._log._writer%29" class="techoutside" data-pltdoc="x"><span class="techinside">log writer</span></a> by flushing all pending log messages and terminating the writer thread. If <span class="RktVar">wait?</span> is not <span class="RktVal">#f</span>, the call to <span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._close-log-writer%29%29" class="RktValLink" data-pltdoc="x">close-log-writer</a></span> blocks until the shutdown is complete. If <span class="RktVar">writer</span> is already closed, <span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._close-log-writer%29%29" class="RktValLink" data-pltdoc="x">close-log-writer</a></span> has no effect.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._toolbox/logging..rkt)._log-writer-closed~3f))"></a><span title="Provided from: toolbox/logging | Package: toolbox-lib"><span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._log-writer-closed~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">log-writer-closed?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">writer</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">writer</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._log-writer~3f%29%29" class="RktValLink" data-pltdoc="x">log-writer?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if the given <a href="#%28tech._log._writer%29" class="techoutside" data-pltdoc="x"><span class="techinside">log writer</span></a> has been closed by <span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._close-log-writer%29%29" class="RktValLink" data-pltdoc="x">close-log-writer</a></span> or if its writer thread has been killed by some other means. Otherwise, <span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._log-writer-closed~3f%29%29" class="RktValLink" data-pltdoc="x">log-writer-closed?</a></span> returns <span class="RktVal">#f</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._toolbox/logging..rkt)._flush-log-writer))"></a><span title="Provided from: toolbox/logging | Package: toolbox-lib"><span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._flush-log-writer%29%29" class="RktValDef RktValLink" data-pltdoc="x">flush-log-writer</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">writer</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">writer</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._log-writer~3f%29%29" class="RktValLink" data-pltdoc="x">log-writer?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._not%252Fc%2529%2529" class="RktValLink Sq" data-pltdoc="x">not/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._log-writer-closed~3f%29%29" class="RktValLink" data-pltdoc="x">log-writer-closed?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Forces the given <a href="#%28tech._log._writer%29" class="techoutside" data-pltdoc="x"><span class="techinside">log writer</span></a> to write any pending messages, blocking until all messages have been written.</div></p><p>This function is not generally necessary, as <span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._spawn-pretty-log-writer%29%29" class="RktValLink" data-pltdoc="x">spawn-pretty-log-writer</a></span> calls <span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=port-buffers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._flush-output%2529%2529" class="RktValLink Sq" data-pltdoc="x">flush-output</a></span> after writing each log message it receives <span class="emph">regardless</span> of whether <span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._flush-log-writer%29%29" class="RktValLink" data-pltdoc="x">flush-log-writer</a></span> is used. The <span class="emph">only</span> effect of <span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogging..rkt%29._flush-log-writer%29%29" class="RktValLink" data-pltdoc="x">flush-log-writer</a></span> is to block the calling thread until the log writer thread has had a chance to receive and write any pending messages. However, this can rarely be useful if the calling thread writes to the same output port and wants to avoid output being interleaved, for example.</p></section><section class="SsectionLevel3" id="section 3.2"><h3 class="heading">3.2<span class="stt">&nbsp;</span><a name="(part._toolbox-logger)"></a><a name="(mod-path._toolbox/logger)"></a>Toolbox logger<span class="button-group"><a href="#(part._toolbox-logger)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._toolbox%2Flogger%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">toolbox/logger</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/toolbox-lib" title="Install this package using `raco pkg install toolbox-lib`"><span class="stt">toolbox-lib</span></a></span></td></tr></table></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._toolbox/logger..rkt)._toolbox-logger))"></a><span title="Provided from: toolbox/logger | Package: toolbox-lib"><span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogger..rkt%29._toolbox-logger%29%29" class="RktValDef RktValLink" data-pltdoc="x">toolbox-logger</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=logging.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._logger%7E3f%2529%2529" class="RktValLink Sq" data-pltdoc="x">logger?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A <a href="https://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=logging.html%23%2528tech._logger%2529" class="techoutside Sq" data-pltdoc="x"><span class="techinside">logger</span></a> used by various functions in this library. Generally, messages are not written to <span class="RktSym"><a href="#%28def._%28%28lib._toolbox%2Flogger..rkt%29._toolbox-logger%29%29" class="RktValLink" data-pltdoc="x">toolbox-logger</a></span> directly, but it serves as a parent logger for module-specific loggers, such as <span class="RktSym"><a href="db_base.html#%28def._%28%28lib._toolbox%2Fdb%2Fbase..rkt%29._toolbox~3adb-logger%29%29" class="RktValLink" data-pltdoc="x">toolbox:db-logger</a></span>.</div></p></section></section><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="order.html" title="backward to &quot;2.5 Orders&quot;" data-pltdoc="x" rel="prev">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Toolbox: Miscellaneous Utilities&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="format.html" title="forward to &quot;4 Formatting&quot;" data-pltdoc="x" rel="next">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>